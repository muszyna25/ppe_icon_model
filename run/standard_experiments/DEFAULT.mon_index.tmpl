#! /usr/bin/env python #%# -*- mode: python -*- vi: set ft=python :

'''\
Create monitoring index for an ICON experiment
'''

import argparse

# Process command line options

command_line = argparse.ArgumentParser(description=__doc__.split('\n', 1)[0])
command_line.add_argument('indexfile_name', help='name of index file')
args = command_line.parse_args()

indexfile_text = '''\
<html>
<head>
    <meta http-equiv="cache-control" content="no-cache">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experiment %{EXP_ID}</title>
    <meta name="version-id" content="$version_id">
    <style type="text/css">
        a { text-decoration:none; color: #b6d8d2; }
        a:hover { color: #FFFFFF; text-decoration:underline }
        body { background-color:#007668; color:#FFFFFF;
               font-family:Helvetica,Arial,sans-serif }
    </style>
</head>
<body>
    <address>
        <a href="..">Index of Experiments</a>
    </address>
    <hr/>
    <h1 align=center>Experiment %{EXP_ID}</h1>
    <table align=center border=0 cellpadding=3>
#%  for mod in JOB.mon_tags:
        <tr><th><a href="%{EXP_ID}_%{mod}.html">%{mod|upper}</a></th></tr>
#%  endfor
    </table>
    <hr/>
    <address>
        Data directory: %{DATA_DIR}<br>
        Log directory: %{LOG_DIR}<br>
        Script directory: %{SCRIPT_DIR}<br>
        Model directory: %{MODEL_DIR}
    </address>
</body>
</html>
'''

indexfile = open(args.indexfile_name, mode='w')
indexfile.write(indexfile_text)
indexfile.close()

