#-----------------------------------------------------------------------------
#
# Leonidas Linardakis, MPI-M, 2009-11
#
#-----------------------------------------------------------------------------
command=create_torus
parameterFile=NAMELIST_TORUS_GRID
commandFile=command.grid
run_commmand="$bindir/grid_command"
#-----------------------------------------------------------------------------

#-----------------------------------------------------------------------------
# absolute paths of directories
GRIDDIR=${basedir}/grids            # graphs, grids and patches
WRKDIR=$GRIDDIR
#-----------------------------------------------------------------------------
# the work directory will be created, if not already there
if [ ! -d $WRKDIR ]; then
    mkdir -p $WRKDIR
fi
#
cd $WRKDIR
#-----------------------------------------------------------------------------
# Define torus parameters
#
cat > $parameterFile << EOF
&torus_grid_parameters
    y_no_of_rows = 2
    x_no_of_columns = 4
    edge_length = 10.0
    x_center = 0.0
    y_center = 0.0
    out_file_name = 'torus-grid_4x2.nc'
    unfolded_torus_file_name = 'unfoldedTorus_grid.nc'
    ascii_filename = 'torus_grid.ascii'
/
EOF

#-----------------------------------------------------------------------------
echo $command $parameterFile > $commandFile
$run_commmand
#-----------------------------------------------------------------------------
