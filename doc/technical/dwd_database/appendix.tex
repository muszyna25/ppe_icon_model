% ------------------------------------------------------------------------------------------
\chapter{ICON standard half level heights}
\label{appendix_levelheights}
% ------------------------------------------------------------------------------------------


% ------------------------------------------------------------------------------------------
\section{Zero topography heights}
% ------------------------------------------------------------------------------------------

ICON standard half level heights $z^{h0}$ are listed in
Table~\ref{tab:half_level_heights}.
If full level heights $z^{f0}$ are required, these can be deduced as
follows:
%
Let $i$ denote the full level index for which the height is wanted. Then the full level 
height $z^{f0}_{i}$ is given by
\begin{align*}
 z^{f0}_{i} = \frac{ z^{h0}_{i} + z^{h0}_{i+1} }{2}
\end{align*}


\begin{table}[p]
  \caption{Standard heights (i.e.\ for zero topography height) for all $91$ vertical half levels.}
  \label{tab:half_level_heights}%

   \renewcommand{\baselinestretch}{1.00}\normalsize%
   \pgfkeys{/pgf/number format/set thousands separator={\,}}
   \pgfplotstableread{vertical_levels_i.txt}{\loadedtable}\vspace*{0pt}%
   \pgfplotstabletypeset[ 
          begin table=\begin{longtable}, 
          end table=\end{longtable},
          columns={k,z,k,z,k,z},
          every  head row/.style={after row={\hline}},
          precision=2,
          font=\normalsize,
          columns/k/.style={column name=level index, column type=c, 
                            column type/.add={>{\columncolor[gray]{.8}}}{}},
          columns/z/.style={column name=height $[m]$, fixed,dec sep align, zerofill,precision=3},
          display columns/0/.style={select equal part entry of={0}{3},string type},
          display columns/1/.style={select equal part entry of={0}{3}},
          display columns/2/.style={select equal part entry of={1}{3},string type},
          display columns/3/.style={select equal part entry of={1}{3}},
          display columns/4/.style={select equal part entry of={2}{3},string type},
          display columns/5/.style={select equal part entry of={2}{3}},
                        ] {\loadedtable}

\end{table}


% ------------------------------------------------------------------------------------------
\section{Non-zero topography heights}
% ------------------------------------------------------------------------------------------

The prerequisite ''zero topography height'' is seldom met in real
applications.
Instead the user has to compute the model level height for each grid
point separately.
To this end the invariant fields \texttt{HSURF} and \texttt{HHL} are
provided where \texttt{HHL} is the geometric height of model half
levels above sea level.
The level height can therefore be computed on full levels by the
following formula:
\begin{align*}
  z^{f}_{i}(x) = \frac{ \texttt{HHL}^{h}_{i}(x) + \texttt{HHL}^{h}_{i+1}(x) }{2} - \texttt{HSURF}(x) 
\end{align*}


%Da die Voraussetzung „zero topography height“ nur selten geben ist, muss der Nutzer, wenn
% ich es richtig verstehe, f"ur jeden Gitterpunkt die H"ohe des jeweiligen Modellevels berechnen. 
%Neben den Gitterpunktdaten der Windkomponenten stehen ihm auch die invarianten HSURF- und HHL-Felder 
%zur Verf"ugung. HHL ist die Geometric Height of model half levels above sea level.  
%Somit k"onnte der Nutzer, wenn  ich es richtig sehe, die Levelh"ohe an jedem Gitterpunkt ausrechnen durch
%
%H (u,v,k), z. B. H (u,v,86) = (HHL85 + HHL86)/2- HSURF.
